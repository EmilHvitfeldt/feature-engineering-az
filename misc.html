<!-- collapse buttons -->
<script>
  // Collapse button
  var container = document.querySelector(".sidebar-title");
  var button = document.createElement("button");
  button.style.border = "none";
  button.style.backgroundColor = "unset";
  var icon_collapse = document.createElement("i");
  icon_collapse.classList = "bi bi-arrows-collapse";
  button.appendChild(icon_collapse);

  button.onclick = onbuttonclicked;
  container.appendChild(button);

  function onbuttonclicked() {
    if (icon_collapse.classList == "bi bi-arrows-collapse") {
      document.querySelectorAll(
        "a.sidebar-item-toggle:not(.collapsed)"
      ).forEach((x) => x.click());
      icon_collapse.classList = "bi bi-arrows-expand";
    } else {
      document.querySelectorAll(
        "a.sidebar-item-toggle.collapsed"
      ).forEach((x) => x.click());
      icon_collapse.classList = "bi bi-arrows-collapse";
    }
  }
  // random button
  var container = document.querySelector(".sidebar-title");
  var button = document.createElement("button");
  button.style.border = "none";
  button.style.backgroundColor = "unset";
  var icon_random = document.createElement("i");
  icon_random.classList = "bi bi-dice-6";
  button.appendChild(icon_random);

  button.onclick = onbuttonclicked_random;
  container.appendChild(button);

  function onbuttonclicked_random() {
    // All sidebar links
    links = document.querySelectorAll(".sidebar-item-text.sidebar-link");
    // Only keep chapters
    links = Array.from(links).filter(element =>
      element.querySelector(".chapter-number")
    );
    // Remove WIP chapters
    links = links.filter(element => {
      const span = element.querySelector("span.chapter-title");
      return !(span && span.textContent.includes("🏗️"));
    });
    const link = links[Math.floor(Math.random() * links.length)];
    link.click();
  }
</script>